{"version":3,"file":"node_modules_capacitor-community_camera-preview_dist_esm_web_js.js","mappings":"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","sources":["./node_modules/@capacitor-community/camera-preview/dist/esm/web.js"],"sourcesContent":["import { WebPlugin } from \"@capacitor/core\";\nexport class CameraPreviewWeb extends WebPlugin {\n    constructor() {\n        super({\n            name: \"CameraPreview\",\n            platforms: [\"web\"],\n        });\n    }\n    async start(options) {\n        return new Promise(async (resolve, reject) => {\n            await navigator.mediaDevices.getUserMedia({\n                audio: !options.disableAudio,\n                video: true\n            }).then((stream) => {\n                // Stop any existing stream so we can request media with different constraints based on user input\n                stream.getTracks().forEach((track) => track.stop());\n            }).catch(error => {\n                reject(error);\n            });\n            const video = document.getElementById(\"video\");\n            const parent = document.getElementById(options.parent);\n            if (!video) {\n                const videoElement = document.createElement(\"video\");\n                videoElement.id = \"video\";\n                videoElement.setAttribute(\"class\", options.className || \"\");\n                // Don't flip video feed if camera is rear facing\n                if (options.position !== 'rear') {\n                    videoElement.setAttribute(\"style\", \"-webkit-transform: scaleX(-1); transform: scaleX(-1);\");\n                }\n                const userAgent = navigator.userAgent.toLowerCase();\n                const isSafari = userAgent.includes('safari') && !userAgent.includes('chrome');\n                // Safari on iOS needs to have the autoplay, muted and playsinline attributes set for video.play() to be successful\n                // Without these attributes videoElement.play() will throw a NotAllowedError\n                // https://developer.apple.com/documentation/webkit/delivering_video_content_for_safari\n                if (isSafari) {\n                    videoElement.setAttribute('autoplay', 'true');\n                    videoElement.setAttribute('muted', 'true');\n                    videoElement.setAttribute('playsinline', 'true');\n                }\n                parent.appendChild(videoElement);\n                if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n                    const constraints = {\n                        video: true,\n                    };\n                    if (options.position === 'rear') {\n                        constraints.video = { facingMode: 'environment' };\n                        this.isBackCamera = true;\n                    }\n                    else {\n                        this.isBackCamera = false;\n                    }\n                    navigator.mediaDevices.getUserMedia(constraints).then(function (stream) {\n                        //video.src = window.URL.createObjectURL(stream);\n                        videoElement.srcObject = stream;\n                        videoElement.play();\n                        resolve({});\n                    }, (err) => {\n                        reject(err);\n                    });\n                }\n            }\n            else {\n                reject({ message: \"camera already started\" });\n            }\n        });\n    }\n    async stop() {\n        const video = document.getElementById(\"video\");\n        if (video) {\n            video.pause();\n            const st = video.srcObject;\n            const tracks = st.getTracks();\n            for (var i = 0; i < tracks.length; i++) {\n                var track = tracks[i];\n                track.stop();\n            }\n            video.remove();\n        }\n    }\n    async capture(_options) {\n        return new Promise((resolve, _) => {\n            const video = document.getElementById(\"video\");\n            const canvas = document.createElement(\"canvas\");\n            // video.width = video.offsetWidth;\n            const context = canvas.getContext(\"2d\");\n            canvas.width = video.videoWidth;\n            canvas.height = video.videoHeight;\n            // flip horizontally back camera isn't used\n            if (!this.isBackCamera) {\n                context.translate(video.videoWidth, 0);\n                context.scale(-1, 1);\n            }\n            context.drawImage(video, 0, 0, video.videoWidth, video.videoHeight);\n            resolve({\n                value: canvas\n                    .toDataURL(\"image/png\")\n                    .replace(\"data:image/png;base64,\", \"\"),\n            });\n        });\n    }\n    async captureSample(_options) {\n        return this.capture(_options);\n    }\n    async getSupportedFlashModes() {\n        throw new Error('getSupportedFlashModes not supported under the web platform');\n    }\n    async setFlashMode(_options) {\n        throw new Error('setFlashMode not supported under the web platform');\n    }\n    async flip() {\n        throw new Error('flip not supported under the web platform');\n    }\n    async setOpacity(_options) {\n        const video = document.getElementById(\"video\");\n        if (!!video && !!_options['opacity']) {\n            video.style.setProperty(\"opacity\", _options['opacity'].toString());\n        }\n    }\n}\nconst CameraPreview = new CameraPreviewWeb();\nexport { CameraPreview };\nimport { registerWebPlugin } from \"@capacitor/core\";\nregisterWebPlugin(CameraPreview);\n"],"names":["WebPlugin","CameraPreviewWeb","constructor","name","platforms","start","options","Promise","resolve","reject","navigator","mediaDevices","getUserMedia","audio","disableAudio","video","then","stream","getTracks","forEach","track","stop","catch","error","document","getElementById","parent","videoElement","createElement","id","setAttribute","className","position","userAgent","toLowerCase","isSafari","includes","appendChild","constraints","facingMode","isBackCamera","srcObject","play","err","message","pause","st","tracks","i","length","remove","capture","_options","_","canvas","context","getContext","width","videoWidth","height","videoHeight","translate","scale","drawImage","value","toDataURL","replace","captureSample","getSupportedFlashModes","Error","setFlashMode","flip","setOpacity","style","setProperty","toString","CameraPreview","registerWebPlugin"],"sourceRoot":"webpack:///"}